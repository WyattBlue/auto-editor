# Nim configuration for auto-editor

--passC:"-I./build/include"
--passL:"-L./build/lib"

# Core FFmpeg libraries
--passL:"-lavfilter -lavformat -lavcodec -lswresample -lswscale -lavutil"

# Codec libraries
--passL:"-lmp3lame -lopus -lvpx -lx264 -ldav1d -lSvtAv1Enc"
@if enable_hevc:
  --passL:"-lx265"
@end

@if macosx:
  --passL:"-framework VideoToolbox -framework AudioToolbox"
  --passL:"-framework CoreFoundation -framework CoreMedia -framework CoreVideo"
@end

@if linux:
  --passL:"-L./build/lib/x86_64-linux-gnu"
  --passL:"-L./build/lib64"
@end

@if enable_whisper:
  --passL:"-lwhisper"
  --passL:"-lggml"
  --passL:"-lggml-base"
  --passL:"-lggml-cpu"
  @if macosx:
    --passL:"-lggml-blas"
    @if arm64:
      --passL:"-lggml-metal"
    @end
    --passL:"-framework Accelerate"
    --passL:"-framework Metal -framework MetalKit -framework Foundation"
  @else:
    --passL:"-lgomp"
  @end
@end

@if enable_hevc or enable_whisper:
  # C++ standard library
  @if macosx:
    --passL:"-lc++"
  @else:
    --passL:"-lstdc++"
  @end
@end

# Fix for GCC
--passC:"-Wno-incompatible-pointer-types"
